---
title: Внутренее устройство Math.random в V8
description: Андрей Печкуров — участвует в разработке Node.js — написал статью про внутреннее устройство Math.random в V8
date: 2021-04-03
url: https://apechkurov.medium.com/v8-deep-dives-random-thoughts-on-math-random-fb155075e9e5
tags:
  - js
  - v8
  - internals
  - security
layout: layouts/post.njk
---
Андрей Печкуров — участвует в разработке Node.js — написал статью про внутреннее устройство Math.random в V8 — "[V8 Deep Dives] Random Thoughts on Math.random()".

V8 использует генератор псевдослучайных чисел (PRNG), поставляемый окружением (Node.js, Chromium) или откатывается на системный источник случайности (например, `/dev/urandom` в Linux), если он не был задан в окружении. После того как генератор был проинициализирован seed-значением, все последующие случайные числа генерируются детерминировано с помощью алгоритма xorshift128+ и сохраняются в пуле из 64 значений, который заполняется по мере необходимости. Использование пула заранее сгенерированных случайных чисел очень распространённый подход, который используется при реализации PRNG.

`Math.random` не рекомендуется использовать для задач, связанных с безопасностью, потому что под капотом он не использует криптографически безопасный генератор псевдослучайных чисел (CSPRNG). Для таких задач вместо `Math.random` рекомендуется использовать генератор из Web Crypto API или модуля `crypto` в Node.js.

https://apechkurov.medium.com/v8-deep-dives-random-thoughts-on-math-random-fb155075e9e5
