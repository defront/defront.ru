---
title: Использование внешних ресурсов в JavaScript без сборки
description: Ингвар Степанян рассказал о способе подключения ресурсов приложения без сборки
date: 2021-09-08
url: https://web.dev/bundling-non-js-resources/
tags:
  - bundle
  - esm
layout: layouts/post.njk
---
Ингвар Степанян рассказал о способе подключения ресурсов приложения без сборки — "Bundling non-JavaScript resources".

Современные бандлеры позволяют импортировать стили, wasm-модули, изображения и т.п. После сборки такие импорты превращаются в набор URL, которые без проблем загружаются браузером. С внедрением нативной поддержки esm в браузеры такой подход вызывает проблемы, так как JavaScript-код с импортом внешних ресурсов нельзя использовать без сборки.

В статье предлагается использовать альтернативный паттерн, который распознаётся всеми браузерами — `new URL('./relative-path', import.meta.url)`. Такой подход формирует в рантайме корректный URL ресурса для дальнейшего использования. `import.meta.url` нужно использовать, чтобы пути резолвились относительно текущего JavaScript-файла, а не относительно HTML-документа. Выражение `new URL('...', import.meta.url)` также распознаётся современными сборщиками при создании чанков с кодом.

В будущем `new URL('...', import.meta.url)` может быть заменён методом `import.meta.resolve('...')` (на данный момент в спецификации не решены некоторые вопросы). Также в браузеры потихоньку начинает проникать поддержка import assertions, но она не покрывает все возможные виды ресурсов.

https://web.dev/bundling-non-js-resources/
