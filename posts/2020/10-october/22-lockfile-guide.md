---
title: Зачем нужен package-lock.json
description: Лукас Ф. Коста — автор библиотеки Chai.js — написал статью про package-lock.json
date: 2020-10-22
url: https://lucasfcosta.com/2020/10/17/lockfile-guide.html
tags:
  - npm
layout: layouts/post.njk
---
Лукас Ф. Коста — автор библиотеки Chai.js — написал статью про package-lock.json — "Why does package-lock.json exist, and how does it work?".

При повторной установке пакетов с зафиксированными версиями результирующий node_modules может отличаться, так как могут быть обновлены зависимости зависимостей. Чтобы добиться детерминированной установки в npm используется файл package-lock.json, в котором явно описываются все версии всех зависимостей.

При запуске команды `npm i` установщик получает список зависимостей проекта из package.json и во время их установки обновляет package-lock.json, записывая туда полное дерево зависимостей с необходимой метаинформацей. Для установки пакетов из package-lock.json нужно использовать другую команду — `npm ci`. Эта команда устанавливает все зависимости, создавая идентичное дерево зависимостей на момент последнего выполнения `npm i`. Кроме детерминированности `npm ci` даёт очень хороший буст в скорости установки пакетов, поэтому чаще всего её используют в CI-системах.

В общем, полезная статья. Рекомендую почитать, если хочется разобраться в этой теме подробнее.

https://lucasfcosta.com/2020/10/17/lockfile-guide.html
