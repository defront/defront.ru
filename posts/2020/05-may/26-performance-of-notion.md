---
title: Анализ производительности приложения Notion
description: Иван Акулов проанализировал js-бандлы и флоу загрузки web-приложения Notion и дал много советов по улучшению его производительности
date: 2020-05-26
url: https://3perf.com/blog/notion/
tags:
  - performance
  - bundle
layout: layouts/post.njk
---
Иван Акулов проанализировал js-бандлы и флоу загрузки web-приложения Notion и дал много советов по улучшению его производительности  — "Case study: Analyzing Notion app performance".

Приложение загружается долго, это особенно заметно на смартфонах среднего ценового сегмента — время загрузки достигает 12 секунд. Больше всего времени уходит на парсинг и выполнение JS. В решении этой проблемы может помочь код-сплиттинг и удаление ненужного кода. Notion использует lodash, чтобы удалить из его кода неиспользуемые методы юзают `babel-plugin-lodash`. Notion для работы с датами использует moment, вместо этой библиотеки лучше использовать современные и оптимизированные альтернативы, например, date-fns. Также в бандле приложения было найдено три разных версии core.js — библиотеки полифиллов. Такое происходит, когда приложение и зависимости используют core.js разных версий. Для решения этой проблемы можно настроить маппинг модулей с помощью `resolve.alias` в конфиге wepback. В статье есть рекомендация транспилировать модули в CommonJS с помощью babel-плагина `plugin-transform-modules-commonjs` с опцией `lazy`. Такая оптимизация позволяет отложить выполнение js-кода, который можно не выполнять на этапе инициализации приложения. 

Очень большая и хорошая статья. Обязательно почитайте, если разрабатываете SPA.

https://3perf.com/blog/notion/
