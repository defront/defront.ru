---
title: Современный JavaScript в библиотеках
description: Гари Чу — devrel из Google — опубликовал статью про проблемы использования транспилированного кода в современных бразуерах
date: 2020-08-05
url: https://dev.to/garylchew/bringing-modern-javascript-to-libraries-432c
tags:
  - proposal
  - perfomance
  - npm
layout: layouts/post.njk
---
Гари Чу — devrel из Google — опубликовал статью про проблемы использования транспилированного кода в современных браузерах — "Bringing Modern JavaScript to Libraries".

На данный момент многие библиотеки из npm транспилируются в ES5. Это проблема, так как даже если проект не поддерживает legacy-браузеры, он должен "заплатить налог" в виде размера бандла. Этот налог для разных библиотек может быть как 7%, так и 40%.

В январе 2020 года в Node.js 13.7.0 появилась поддержка условных экспортов, с помощью которых можно указать разные сборки для разных типов окружений. Гари предлагает добавить новый тип окружения в условный экспорт для бандлов, которые транспилируются в ES2017 (один из возможных вариантов — `browser2017` ). Предполагается, что бандлеры могут использовать это окружение для создания облегчённой версии бандла приложения. Также рассматривается вариант публикации  кода без транспиляции, но в этом случае увеличится время сборки.

Очень полезное предложение. Думаю, что бандлеры адаптируют предлагаемый подход или как минимум придут к какому-нибудь другому альтернативному решению

https://dev.to/garylchew/bringing-modern-javascript-to-libraries-432c
