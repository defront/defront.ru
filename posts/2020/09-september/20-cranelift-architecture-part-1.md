---
title: Новая архитектура бэкенда Cranelift. Часть 1
description: Крис Фоллин написал статью про новую архитектуру бэкенда Cranelift
date: 2020-09-20
url: https://cfallin.org/blog/2020/09/18/cranelift-isel-1/
tags:
  - firefox
  - internals
  - wasm
layout: layouts/post.njk
---
Крис Фоллин написал статью про новую архитектуру бэкенда Cranelift — "A New Backend for Cranelift, Part 1: Instruction Selection".

Cranelift — это фреймворк для компиляторов, написанный на Rust. По своему дизайну он похож на llvm: фронтенд часть отвечает за преобразование кода в промежуточное представление (IR), бэкенд часть — за компиляцию IR в исполняемый код целевой платформы. Cranelift используется в Firefox для компиляции wasm. Также он используется в качестве компилятора в wasmtime — обособленном рантайме для WebAssembly.

Старая архитектура бэкенда Cranelift была сложна для добавления новых фич. Также нельзя было скомпилировать последовательность из нескольких команд IR в одну команду (отношение "многие к одному"). Новая архитектура решает эти проблемы.

Статья хардкорная. Рекомендую почитать всем, кто интересуется темой разработки компиляторов.

https://cfallin.org/blog/2020/09/18/cranelift-isel-1/
