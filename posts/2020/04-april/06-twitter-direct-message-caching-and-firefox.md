---
title: Проблема с кешированием данных Twitter в Firefox
description: Мартин Томсон объясняет, почему FIrefox кешировал личные сообщения
date: 2020-04-06
url: https://hacks.mozilla.org/2020/04/twitter-direct-message-caching-and-firefox/
tags:
  - firefox
  - cache
  - http
layout: layouts/post.njk
---
Недавно в Firefox была обнаружена проблема с кешированием данных в Twitter. Любой пользователь с физическим доступом к компьютеру теоретически мог прочитать чужие личные сообщения. Мартин Томсон из команды разработки Firefox рассказал, почему это произошло, в статье "Twitter Direct Message Caching and Firefox".

Чтобы предотвратить кеширование контента в браузерах, сайт должен отправить в ответе http-заголовок `Cache-Control: no-store`. В любом другом случае в Firefox начинает работать механизм эвристического кеширования. Этот механизм используется для предсказания, какой контент может быть закеширован и на какое время. Контент без `Cache-Control: no-store` сохраняется в кэше на семь дней. Как вы наверное уже догадались Twitter не отправлял этот заголовок в ответе из-за чего в Firefox включался механизм кеширования. Вместо него Twitter отправлял заголовок `Content-Disposition`, который используется для добавления метаинформации (например, имени файла) к загружаемым файлам. В статье говорится, что в "other browser" (как я понимаю Chrome) наличие этого заголовка отключает кеширование, но это поведение не является частью стандарта.

Какие можно сделать выводы из этой истории? Нужно проверять работу сайта в разных браузерах (Chrome, Firefox, Safari) и не стоит полагаться на поведение браузера, которое не соответствует стандартам.

https://hacks.mozilla.org/2020/04/twitter-direct-message-caching-and-firefox/
