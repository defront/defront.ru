---
title: Как тестируеются транспортные протоколы
description: Лоит Бэллад из Cloudflare написал статью про то, как они тестируют разрабатываемые протоколы
date: 2020-01-01
url: https://calendar.perfplanet.com/2019/how-to-develop-a-practical-transport-protocol/
tags:
  - http
  - debug
  - net
layout: layouts/post.njk
---
Лоит Бэллад из Cloudflare написал статью про то, как они тестируют разрабатываемые протоколы — "How to develop a practical transport protocol".

На данный момент Cloudflare участвует в разработке QUIC и HTTP/3. Отладка сетевого стека — нетривиальная задача, особенно, если речь идёт об отладке на реальных мобильных устройствах. В самом простом случае разрабатывать протокол можно на одном компьютере, используя сеть из docker-контейнеров. Но такой подход не может выявить проблемы, которые могут возникнуть в реальном мире. Поэтому для полноценного тестирования создаются специальные "лаборатории" — выделенные машины, соединённые между собой в сеть. Для эмуляции edge, 3g, lte используется `netem` (на Linux) и `ipfw` + `dummynet` (на FreeBSD). Меня немного позабавило, что ребята взламывают девайсы на iOS, для того, чтобы понять, как будут работать новые протоколы на реальном железе от Apple.

В общем, статья интересная. Рекомендую почитать, если хотите узнать, как разрабатываются протоколы.

https://calendar.perfplanet.com/2019/how-to-develop-a-practical-transport-protocol/
