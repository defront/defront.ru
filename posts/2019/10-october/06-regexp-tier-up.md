---
title: Оптимизация регулярных выражений в V8
description: Начиная с версии 7.9 в V8 изменилась работа с регулярными выражениями. Патрик Тиер и Ана Пешко написали пост с объяснением всех деталей
date: 2019-10-06
url: https://v8.dev/blog/regexp-tier-up
tags:
  - v8
  - regexp
  - performance
layout: layouts/post.njk
---
Начиная с версии 7.9 в V8 изменилась работа с регулярными выражениями. Патрик Тиер и Ана Пешко написали пост с объяснением всех деталей — "Improving V8 regular expressions".

По умолчанию V8 компилирует регулярные выражения в нативный код при их первом запуске. Это влечёт за собой нагрузку на память. Около полугода назад как часть работы над "JIT-less V8" был добавлен интерпретатор для регулярных выражений. С версии 7.9 по умолчанию регулярные выражения будут исполняться с его помощью. Компиляция будет происходить только после того как одно и то же регулярное выражение будет выполняться несколько раз (hot-path). Новая стратегия позволяет уменьшить потребление оперативной памяти на 4-7%. Интерпретатор регулярных выражений был оптимизирован, теперь он в 2 раза быстрее. Это позволило не сильно просадить метрики по скорости относительно скомпилированных регулярок.

В статье много технических деталей того, как это всё работает. Читать сложно, но интересно.

https://v8.dev/blog/regexp-tier-up
