---
title: Оптимизация Boomerang
description: Разработчик Akamai рассказывает про оптимизацию библиотеки, использующейся для сборки клиентских метрик пользователей
date: 2019-12-06
url: https://calendar.perfplanet.com/2019/boomerang-performance-update/
tags:
  - performance
  - algorithm
  - library
layout: layouts/post.njk
---
Вчера на `calendar.pefrplanet.com` была опубликована статья Ника Джансма — разработчика Akamai — про оптимизацию библиотеки для сбора RUM (Real User Metrics) — "Boomerang Performance Update".

Boomerang — это библиотека с открытым исходным кодом. Она используется под капотом mPulse (сервис для сбора RUM-метрик от Akamai). В 2017 году был проведён аудит Boomerang, который выявил узкие места. Загрузчик основного скрипта использовал динамически создаваемый iframe. На старых девайсах создание iframe несло дополнительные издержки, увеличивая время инициализации на 20-40мс. После перехода на `link preload` в браузерах, которые его поддерживают, время инициализации уменьшилось до 1мс. Для сбора таймингов ресурсов сайта, они используют префиксное дерево (Trie), которое также было неоптимизировано. После исправления функция оптимизации дерева стала работать в четыре раза быстрее. Чтобы уменьшить размер основного скрипта, алгоритм хеширования MD5 был заменён на FNV-1. Скрипт уменьшился на 8 килобайт.

Статья очень интересная. Рекомендую почитать всем, кто интересуется темой оптимизации сайтов.

https://calendar.perfplanet.com/2019/boomerang-performance-update/
