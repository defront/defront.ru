---
title: Отслеживание проблем производительности в компонентах
description: Стоян Стефанов рассказал про то как отслеживать деградацию производительности компонентов
date: 2019-12-03
url: https://calendar.perfplanet.com/2019/javascript-component-level-cpu-costs/
tags:
  - performance
  - ui
  - chrome
layout: layouts/post.njk
---
C 2009 года проходит событие, когда весь декабрь на сайте `calendar.perfplanet.com` публикуются статьи про производительность. Первого декабря появилась статья Стояна Стефанова, про то как отслеживать деградацию производительности компонентов — "JavaScript component-level CPU costs".

Стоян предлагает измерять производительность количеством инструкций, которые требуются процессору для рендеринга компонентов. Количество инструкций, в отличие от времени, более предсказуемая величина, так как она не сильно зависит от окружения. Получить количество инструкций можно с помощью трассировки в Chrome. Автоматизировать сбор метрик можно с помощью Puppeteer. Но не всё так гладко, так как для выполнения одного и того же кода может требоваться разное количество инструкций из-за сборщика мусора или оптимизаций. Чтобы корректно подсчитать метрику, не рекомендуется запускать один и тот же код несколько раз. Для того чтобы исключить операции, вызванные GC, необходимо вычесть количество инструкций GC (можно получить в трассировке) из общего количества инструкций.

Идея интересная, но мне кажется сомнительным гонять эти проверки перед каждым коммитом, как предлагается в статье.

https://calendar.perfplanet.com/2019/javascript-component-level-cpu-costs/
