---
title: Reduce вместе со spread объектов — это антипаттерн
description: Объяснение, почему совместное использование reduce и spread негативно влияет на производительность
date: 2019-06-19
url: https://www.richsnapp.com/blog/2019/06-09-reduce-spread-anti-pattern
tags:
  - v8
  - performance
  - algorithm
layout: layouts/post.njk
---
Рич Снапп написал статью с объяснением того, почему лучше отказаться от использования reduce вместе со spread объектов — "The reduce ({...spread}) anti-pattern".

В современном JavaScript код для создания объекта из массива объектов с одинаковыми свойствами можно написать так:

```js
let result = items.reduce((acc, item) => ({
   ...acc, [item.name]: item.value
}), {})
```

Как оказывается в v8 такой код будет выполняться с квадратичной сложностью. Рич доказывает существование этой проблемы, разбирая байткод, который генерирует движок. В качестве альтернативы он предлагает использовать reduce с мутированием, или for...of, которые справляются с этой задачей за линейное время.

Если у вас в проекте используется подобный код, то по крайней мере стоит убедиться, что он ни на что не влияет. Но я бы его просто переписал, потому что он плохо читается (имхо, конечно).

https://www.richsnapp.com/blog/2019/06-09-reduce-spread-anti-pattern
